parameters:
  _param:
    jenkins_pollscm_spec: "H/60 * * * *"
  jenkins:
    client:
      job_template:
        git-mirror-2way-salt-formula:
          name: git-mirror-2way-salt-formula-{{name}}
          jobs:
            - name: aodh
              branches: ${_param:salt_formulas_branches}
            - name: apache
              branches: ${_param:salt_formulas_branches}
            - name: aptcacher
              branches: ${_param:salt_formulas_branches}
            - name: aptly
              branches: ${_param:salt_formulas_branches}
            - name: artifactory
              branches: ${_param:salt_formulas_branches}
            - name: avinetworks
              branches: ${_param:salt_formulas_branches}
            - name: backupninja
              branches: ${_param:salt_formulas_branches}
            - name: barbican
              branches: ${_param:salt_formulas_branches}
            - name: billometer
              branches: ${_param:salt_formulas_branches}
            - name: bind
              branches: ${_param:salt_formulas_branches}
            - name: bird
              branches: ${_param:salt_formulas_branches}
            - name: cadf
              branches: ${_param:salt_formulas_branches}
            - name: calico
              branches: ${_param:salt_formulas_branches}
            - name: cassandra
              branches: ${_param:salt_formulas_branches}
            - name: ccp
              branches: ${_param:salt_formulas_branches}
            - name: ceilometer
              branches: ${_param:salt_formulas_extra_branches}
            - name: ceph
              branches: ${_param:salt_formulas_branches}
            - name: chrony
              branches: ${_param:salt_formulas_branches}
            - name: cinder
              branches: ${_param:salt_formulas_extra_branches}
            - name: collectd
              branches: ${_param:salt_formulas_branches}
            - name: dekapod
              branches: ${_param:salt_formulas_branches}
            - name: devops-portal
              branches: ${_param:salt_formulas_branches}
            - name: docker
              branches: ${_param:salt_formulas_branches}
            - name: dovecot
              branches: ${_param:salt_formulas_branches}
            - name: elasticsearch
              branches: ${_param:salt_formulas_branches}
            - name: etcd
              branches: ${_param:salt_formulas_branches}
            - name: foreman
              branches: ${_param:salt_formulas_branches}
            - name: freeipa
              branches: ${_param:salt_formulas_branches}
            - name: galera
              branches: ${_param:salt_formulas_branches}
            - name: gerrit
              branches: ${_param:salt_formulas_branches}
            - name: git
              branches: ${_param:salt_formulas_branches}
            - name: gitlab
              branches: ${_param:salt_formulas_branches}
            - name: glance
              branches: ${_param:salt_formulas_extra_branches}
            - name: glusterfs
              branches: ${_param:salt_formulas_branches}
            - name: gnocchi
              branches: ${_param:salt_formulas_branches}
            - name: grafana
              branches: ${_param:salt_formulas_branches}
            - name: graphite
              branches: ${_param:salt_formulas_branches}
            - name: haproxy
              branches: ${_param:salt_formulas_branches}
            - name: heat
              branches: ${_param:salt_formulas_extra_branches}
            - name: heka
              branches: ${_param:salt_formulas_branches}
            - name: helm
              branches: ${_param:salt_formulas_branches}
            - name: horizon
              branches: ${_param:salt_formulas_extra_branches}
            - name: influxdb
              branches: ${_param:salt_formulas_branches}
            - name: iptables
              branches: ${_param:salt_formulas_branches}
            - name: ironic
              branches: ${_param:salt_formulas_branches}
            - name: isc-dhcp
              branches: ${_param:salt_formulas_branches}
            - name: java
              branches: ${_param:salt_formulas_branches}
            - name: jenkins
              branches: ${_param:salt_formulas_branches}
            - name: kedb
              branches: ${_param:salt_formulas_branches}
            - name: keepalived
              branches: ${_param:salt_formulas_branches}
            - name: keystone
              branches: ${_param:salt_formulas_extra_branches}
            - name: kibana
              branches: ${_param:salt_formulas_branches}
            - name: kubernetes
              branches: ${_param:salt_formulas_extra_branches}
            - name: letsencrypt
              branches: ${_param:salt_formulas_branches}
            - name: libvirt
              branches: ${_param:salt_formulas_branches}
            - name: linux
              branches: ${_param:salt_formulas_branches}
            - name: lldp
              branches: ${_param:salt_formulas_branches}
            - name: logrotate
              branches: ${_param:salt_formulas_branches}
            - name: maas
              branches: ${_param:salt_formulas_branches}
            - name: magnum
              branches: ${_param:salt_formulas_branches}
            - name: memcached
              branches: ${_param:salt_formulas_branches}
            - name: midonet
              branches: ${_param:salt_formulas_branches}
            - name: monasca
              branches: ${_param:salt_formulas_branches}
            - name: mongodb
              branches: ${_param:salt_formulas_branches}
            - name: murano
              branches: ${_param:salt_formulas_branches}
            - name: mysql
              branches: ${_param:salt_formulas_branches}
            - name: nagios
              branches: ${_param:salt_formulas_branches}
            - name: network
              branches: ${_param:salt_formulas_branches}
            - name: neutron
              branches: ${_param:salt_formulas_extra_branches}
            - name: nfs
              branches: ${_param:salt_formulas_branches}
            - name: nginx
              branches: ${_param:salt_formulas_branches}
            - name: nodejs
              branches: ${_param:salt_formulas_branches}
            - name: nova
              branches: ${_param:salt_formulas_extra_branches}
            - name: ntp
              branches: ${_param:salt_formulas_branches}
            - name: octavia
              branches: ${_param:salt_formulas_branches}
            - name: opencontrail
              branches: ${_param:salt_formulas_branches}
            - name: openldap
              branches: ${_param:salt_formulas_branches}
            - name: openssh
              branches: ${_param:salt_formulas_branches}
            - name: openvpn
              branches: ${_param:salt_formulas_branches}
            - name: openvstorage
              branches: ${_param:salt_formulas_branches}
            - name: owncloud
              branches: ${_param:salt_formulas_branches}
            - name: panko
              branches: ${_param:salt_formulas_branches}
            - name: postfix
              branches: ${_param:salt_formulas_branches}
            - name: postgresql
              branches: ${_param:salt_formulas_branches}
            - name: powerdns
              branches: ${_param:salt_formulas_branches}
            - name: pritunl
              branches: ${_param:salt_formulas_branches}
            - name: prometheus
              branches: ${_param:salt_formulas_branches}
            - name: python
              branches: ${_param:salt_formulas_branches}
            - name: rabbitmq
              branches: ${_param:salt_formulas_branches}
            - name: reclass
              branches: ${_param:salt_formulas_branches}
            - name: redis
              branches: ${_param:salt_formulas_branches}
            - name: roundcube
              branches: ${_param:salt_formulas_branches}
            - name: rsync
              branches: ${_param:salt_formulas_branches}
            - name: rsyslog
              branches: ${_param:salt_formulas_branches}
            - name: rundeck
              branches: ${_param:salt_formulas_branches}
            - name: sahara
              branches: ${_param:salt_formulas_branches}
            - name: salt
              branches: ${_param:salt_formulas_branches}
            - name: sensu
              branches: ${_param:salt_formulas_branches}
            - name: sentry
              branches: ${_param:salt_formulas_branches}
            - name: sphinx
              branches: ${_param:salt_formulas_branches}
            - name: spinnaker
              branches: ${_param:salt_formulas_branches}
            - name: statsd
              branches: ${_param:salt_formulas_branches}
            - name: supervisor
              branches: ${_param:salt_formulas_branches}
            - name: swift
              branches: ${_param:salt_formulas_extra_branches}
            - name: taiga
              branches: ${_param:salt_formulas_branches}
            - name: telegraf
              branches: ${_param:salt_formulas_branches}
            - name: varnish
              branches: ${_param:salt_formulas_branches}
            - name: xtrabackup
              branches: ${_param:salt_formulas_branches}
            - name: zookeeper
              branches: ${_param:salt_formulas_branches}
          template:
            discard:
              build:
                keep_num: 10
              artifact:
                keep_num: 10
            type: workflow-scm
            concurrent: false
            scm:
              type: git
              url: "${_param:jenkins_gerrit_url}/mk/mk-pipelines"
              credentials: "gerrit"
              script: git-mirror-2way-pipeline.groovy
              github:
                url: "https://github.com/salt-formulas/salt-formula-{{name}}"
            trigger:
              github:
              pollscm:
                spec: ${_param:jenkins_pollscm_spec}
            param:
              SOURCE_URL:
                type: string
                default: "${_param:jenkins_gerrit_url}/salt-formulas/{{name}}.git"
              TARGET_URL:
                type: string
                default: "git@github.com:salt-formulas/salt-formula-{{name}}.git"
              CREDENTIALS_ID:
                type: string
                default: "gerrit"
              BRANCHES:
                type: string
                default: "{{branches}}"
